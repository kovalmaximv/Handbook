# Производительность и масштабирование
## Вводные слова про производительность
**Повышение производительности** - выполнение большего объема работы при меньшем объеме ресурсов.

Стоит помнить, что введение многопоточности содержит свои издержки (координация между потоками, переключение контекста, 
и тд). При эффективном использовании потоков эти издержки компенсируются бОльшей пропускной способностью.

Используя многопоточность, мы хотим добиться единственной цели: позволить нашей программе эксплуатировать больше 
ресурсов (ядра процессора, подключения к бд, и тд).

#### Производительность и масштабируемость
Производительность - [как быстро] - выполнение _той же_ работы с _меньшими_ ресурсами.  
Масштабируемость - [как много] - выполнение _бОльшей_ работы с _бОльшим_ количеством ресурсов.

По этой причине, проектировка многопоточных приложений для масштабируемости сильно отличается от проектировки 
производительных приложений. Зачастую для масштабируемости приходится принимать решения, которые вредят 
производительности.

Всем известная трехуровневая архитектура (бд, бизнес уровень, представление) в угоду масштабируемости жертвует 
производительностью. Монолитное приложение почти наверняка обеспечит более высокую производительность для первой и 
единственной единицы работы. 

Однако рано или поздно монолит достигнет границы своей обрабатывающей мощности. Тут возникает проблема: увеличить 
мощность монолита может быть не просто. Добавление новых ядер процессору может не помочь. В то время как трехуровневая 
архитектура является более масштабируемой. Зачастую достаточно просто добавить больше доступных ресурсов приложению.

Для серверных приложений масштабируемость важнее производительности. Сервер может пожертвовать скоростью обработки 
одного запроса, но для сервера критично иметь большую пропускную способность.

#### Оценивание компромиссов производительности и масштабируемости
При написании кода мы зачастую не владеем полной информации о системе. 

Например, при реализации сортировки мы можем не знать, какие массивы данных нам предстоит сортировать, хотя эти 
знания помогут нам выбрать правильный алгоритм. По этой причине мы часто занимаемся преждевременной оптимизацией.

> :exclamation: **Избегайте преждевременной оптимизации. Сначала выполните задачу верно, а потом занимайтесь 
> оптимизацией (если это вообще будет необходимо).**

Стремление к излишней производительности системы является одним из главных источников ошибок конкурентности. Зачастую 
интуиция обманывает разработчиков, они неверно понимают, где находится слабое звено производительности или какой подход
будет быстрее, а какой медленнее того, что есть сейчас. Поэтому необходимы конкретные требования к производительности
(что и до какой степени ускорять). Так же стоит использовать специальные библиотеки для измерения производительности.

## Закон Амдала
