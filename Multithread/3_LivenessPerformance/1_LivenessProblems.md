# Предотвращение сбоев жизнеспособности
## Взаимная блокировка (deadlock)
Взаимная блокировка возможна при следующем случае:
1) Поток А владеет бессрочно замком А1
2) Поток В владеет бессрочно замком В1
3) Поток А пытается приобрести замок В1, получает блокировку
4) Поток В пытается приобрести замок А1, получает блокировку

Таким образом, оба потока будут вечно ждать друг друга, поскольку ни один поток не освободит замок, необходимый 
другому потоку и оба потока будут вечно заблокированы. JVM никак не решает данную ситуацию, заблокированные потоки 
останутся таковыми навсегда. Работоспособность приложения может восстановить только перезапуск приложения. 

#### Взаимные блокировки из-за порядка блокировки
Рассмотрим пример:
```java
public class LeftRightDeadLock {
    private final Object leftObject;
    private final Object rightObject;
    
    public void leftRight() {
        synchronized (leftObject) {
            synchronized (rightObject) {
                doSomething();
            }
        }
    }
    
    public void rightLeft() {
        synchronized (rightObject) {
            synchronized (leftObject) {
                doSomething();
            }
        }
    }
}
```
Оба метода приобретают левый и правый замки, в случае неудачной временной координации два потока могут 
заблокироваться следующим образом:
