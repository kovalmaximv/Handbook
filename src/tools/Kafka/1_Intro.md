# Введение
Kafka - брокер сообщений, способный выдерживать большие нагрузки.

Схема компонентов кафки:  
![img.png](../../../img/kafka/kafka_components.jpg)

1) Zookeeper - инструмент для координации. Следит за состоянием узлов и исходя из этого координирует чтение/запись. 
В 2024 году планируется отказаться от Zookeeper в пользу встроенный в кафку KRaft.  
2) Kafka cluster - сервер, содержащий топики и отвечающий за передачу сообщений.
3) Kafka Topic - непосредственно топик, хранящий сообщения.
4) Consumer/Producer - отправитель и получатель данных.

Топики представляют собой не просто большую очередь для хранения сообщений. Каждый топик делится на **партиции** 
(partition). Внутри партиции и находится очередь из сообщений. Механизм партиций необходим для распаралеливания 
процесса. Ведь вместо того, чтобы читать всем из одной большой очереди, лучше разделить очередь на очереди поменьше
и читать уже **без конкурентного** доступа оттуда. Каждую партицию читает только один процесс получателя. Сообщения 
между партициями разделяются на основе некоторых правил, упрощено можно считать, что сообщение может попасть в любую
из партиций и распределение между партициями равномерное. Таким образом, для высоконагруженных систем можно сделать 
кучу партиций, поднять кучу инстансов сервисов и держать таким образом большую нагрузку.

Все получатели объединяются в группы (consumer group). Например, может быть несколько групп (аналитиков, безопасников,
бизнес сервисов) и каждая из групп читает сообщение из топика для своих целей. Важно, что каждая группа читает топик 
**независимо** и не мешая друг другу. Если группа аналитиков прочитала 35 сообщение из очереди и упало, то это не 
помешает другим группам (они даже ничего не узнают) и после сбоя группа аналитиков сможет читать сообщения с того же 
места.

