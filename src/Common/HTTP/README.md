# HTTP
## Оглавление
- [HTTP/0.9](#http09)
- [HTTP/1.0](#http10)
- [HTTP/1.1](#http11)
- [HTTP/2](#http2)
- [HTTP методы](#http-методы)
- [Статусы ответов](#статусы-ответов)
- [Ссылки на источники](#ссылки-на-источники)

## HTTP/0.9
Поддерживался один метод GET, при помощи которого можно было загрузить html страницу.
## HTTP/1.0
Добавили:
- Обязательно нужно указывать версию HTTP в вызове
- В ответе от сервера теперь есть статус
- В запросе и ответе теперь есть заголовки
- Новые методы: HEAD & POST
## HTTP/1.1
Добавили:
- Методы PUT, DELETE, OPTIONS, TRACE, CONNECT, PATCH
- Кеширование ответов на стороне клиента
- Поддержка виртуальных хостов (на одной тачке может быть несколько сайтов, запрашиваемый определяется по хедеру Host)
- keep-alive (позволяет использовать один tcp/ip коннект для нескольких запросов сразу)
- Потоковая пересылка данных частями (chunked)
## HTTP/2
Добавили:
- Кодирование данных перед отправкой в бинарный формат (для уменьшения размера и ускорения передачи)
- Новый алгоритм сжатия заголовков
- Улучшена работа с потоками запросов (позволяет быстрее грузить страницу)

## Cookies
Cookies - данные, в которых сервер передает важную информацию о клиенте (токен аутентификации, пользовательские рекомендации, другая необходимая информация). Сервер отсылает эту информацию браузеру (посредством хедера Set-Cookie) и браузер отправляет эту информацию на сервер с каждым последующим запросом. Для cookie можно поставить автоматическое время expire или max_age. Какое-либо из значений cookie нельзя удалить, только ждать expire или переопределить.

У cookie есть область видимости. По умолчанию они доступы только для хоста (example.com), но тогда cookie не будут доступны в под-доменах. Прямо в куках можно указать параметры path и domain, которые будут определять область видимости cookie.

Для защиты cookie используется параметры: secure (запрещает отправку cookie по http без ssl), httpOnly (к cookie нельзя обратиться из JavaScript в браузере, для защиты от XSS атак).
## HTTP методы
##### GET
Запрос на получение некоего ресурса.

Не изменяет состояние сервера (безопасный запрос), идемпотентный, кешируемый.
##### HEAD
Аналог GET, но без тела ответа, нужен для получения данных из хедеров

Не изменяет состояние сервера (безопасный запрос), идемпотентный, кешируемый.
##### POST
Используется для отправки данных на сервер в теле запроса. Вызывает изменение состояния или побочные действия на сервере.

Изменяет состояние сервера (небезопасный запрос), не идемпотентный, не кешируемый (только если не включена информация о свежести ответа).
##### PUT
Замена какой-то существующей сущности.

Изменяет состояние сервера (небезопасный запрос), идемпотентный, не кешируемый (только если не включена информация о свежести ответа).
##### DELETE
Удаление какой-то существующей сущности.

Изменяет состояние сервера (небезопасный запрос), идемпотентный, не кешируемый (только если не включена информация о свежести ответа).
##### OPTION
Используется в CORS для сложных операций. Таким образом браузер запрашивает список разрешенных действий от лица другого хоста у сервера.

Не изменяет состояние сервера (безопасный запрос), идемпотентный, не кешируемый (только если не включена информация о свежести ответа).
## Статусы ответов
- Информационные ответы: коды 100–199
- Успешные ответы: коды 200–299
- Редиректы: коды 300–399
- Клиентские ошибки: коды 400–499
- Серверные ошибки: коды 500–599

Коды с редиректами:
- **301 Moved Permanently** - новый путь в хедере location. Клиент может изменить следующий запрос с POST на GET
- **308 Permanent Redirect** - то же самое, что и 301, но клиент не может изменить метод следующего запроса
- **302 Found** - ресурс временно доступен по другому адресу, клиент должен продолжать использовать текущий адрес для получения ресурса. Клиент может изменить следующий запрос с POST на GET
- **307 Temporary Redirect** - то же самое, что и 302, но клиент не может изменить метод следующего запроса
## Ссылки на источники
1) https://habr.com/ru/companies/avito/articles/710660/
2) https://habr.com/ru/companies/avito/articles/710674/
3) https://habr.com/ru/companies/avito/articles/710678/
